!function(){"use strict";void 0===String.prototype.replaceAll&&(String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),(()=>t))}),figma.showUI(__html__,{width:342,height:444});const e=()=>{const e=(figma.getLocalPaintStyles(),figma.getLocalPaintStyles().reduce(((e,t)=>(e.push({description:t.description,id:t.id,key:t.key,name:t.name,paints:t.paints,remote:t.remote,type:t.type}),e)),[])),t={};return e.reduce(((e,a)=>{const s=a.name.replaceAll(" ","/").split("/")[0];return t.hasOwnProperty(s)||(t[s]=Object.assign({},{[s]:a.name.replaceAll(" ","/").split("/")[0]}),e.push(a.name.replaceAll(" ","/").split("/")[0])),e}),[]).reduce(((t,a)=>{const s=e.reduce(((e,t)=>("SOLID"===t.paints[0].type&&t.name.replaceAll(" ","/").split("/")[0]===a&&e.push(t),e)),[]);return s.length>0&&t.push({themeName:s[0].name.replaceAll(" ","/").split("/")[0],data:s}),t}),[])};let t=e();figma.clientStorage.getAsync(`themesList_${figma.currentPage.id}`).then((e=>{figma.ui.postMessage({type:"themes_list",message:e||"[]"})}),(()=>{figma.ui.postMessage({type:"themes_list",message:[]})})),figma.ui.postMessage({type:"styles",message:[...t]}),figma.on("selectionchange",(()=>{console.log("selectionchange")})),figma.on("currentpagechange",(()=>{console.log("currentpagechange")})),figma.ui.onmessage=t=>{if("update_themes_list"===t.type&&figma.clientStorage.setAsync(`themesList_${figma.currentPage.id}`,JSON.stringify(t.data)).then((()=>{}),(e=>{console.log("error: ",e)})),"update_paint_styles"===t.type){const{color:a,styles:s}=t.data;s.map((e=>{figma.getStyleById(e.id).paints=[Object.assign(Object.assign({},e.paints[0]),{opacity:a.a,color:{r:a.r,g:a.g,b:a.b}})]})),figma.ui.postMessage({type:"styles",message:[...e()]}),figma.notify("Updated colors")}if("create_new_mode"===t.type){const{name:a,oldName:s,data:i}=t.data;i.reduce(((e,t)=>(e.push(...t.data),e)),[]).map((e=>{const t=e.name.replaceAll(s,a),i=figma.createPaintStyle();i.name=t,i.paints=e.paints})),figma.notify(`Created new mode "${a}"`),figma.ui.postMessage({type:"styles",message:[...e()]})}}}();
